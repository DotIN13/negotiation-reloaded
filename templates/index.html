<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Live ABM Dashboard</title>
  <!-- Socket.IO -->
  <script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>
  <!-- Plotly -->
  <script src="https://cdn.plot.ly/plotly-3.0.1.min.js" charset="utf-8"></script>
  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <!-- Custom CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>
<body>
  <aside class="sidebar">
    <div class="sidebar-container">
      <h2>Simulation Controls</h2>
      <form id="config-form">
        <div class="form-row">
          <label for="initial_conflict_intensity">Initial Conflict Intensity</label>
          <input id="initial_conflict_intensity" name="initial_conflict_intensity" class="config-input" type="number" value="0.3" step="0.05" min="0" max="1"/>
        </div>
        <div class="form-row">
          <label for="initial_negotiation_tension">Initial Negotiation Tension</label>
          <input id="initial_negotiation_tension" name="initial_negotiation_tension" class="config-input" type="number" value="0.3" step="0.05" min="0" max="1"/>
        </div>
        <div class="form-row">
          <label for="negotiation_tension_factor">Negotiation Tension Factor</label>
          <input id="negotiation_tension_factor" name="negotiation_tension_factor" class="config-input" type="number" value="0.05" step="0.01" min="0" max="1"/>
        </div>
        <div class="form-row">
          <label for="initial_fatigue">Initial Fatigue</label>
          <input id="initial_fatigue" name="initial_fatigue" class="config-input" type="number" value="0.0" step="0.01" min="0" max="1"/>
        </div>
        <div class="form-row">
          <label for="fatigue_change_factor">Fatigue Change Factor</label>
          <input id="fatigue_change_factor" name="fatigue_change_factor" class="config-input" type="number" value="0.01" step="0.005" min="0" max="1"/>
        </div>
        <div class="form-row">
          <label for="fatigue_factor">Fatigue Factor</label>
          <input id="fatigue_factor" name="fatigue_factor" class="config-input" type="number" value="0.3" step="0.05" min="0" max="1"/>
        </div>
        <div class="form-row">
          <label for="surplus_factor">Surplus Factor</label>
          <input id="surplus_factor" name="surplus_factor" class="config-input" type="number" value="0.3" step="0.05" min="0" max="1"/>
        </div>
        <div class="form-row">
          <label for="external_pressure_factor">External Pressure Factor</label>
          <input id="external_pressure_factor" name="external_pressure_factor" class="config-input" type="number" value="0.3" step="0.05" min="0" max="1"/>
        </div>
        <div class="form-row">
          <label for="proposal_std">Proposal Standard Deviation</label>
          <input id="proposal_std" name="proposal_std" class="config-input" type="number" value="5.0" step="0.1" min="0" max="20"/>
        </div>
        <div class="form-row">
          <label for="resolved_threshold">Resolved Threshold</label>
          <input id="resolved_threshold" name="resolved_threshold" class="config-input" type="number" value="0.75" step="0.05" min="0" max="1"/>
        </div>
        <div class="form-row">
          <label for="max_steps">Max Steps</label>
          <input id="max_steps" name="max_steps" class="config-input" type="number" value="200" min="1" />
        </div>
        <div class="form-row">
          <label for="seed">Random Seed</label>
          <input id="seed" name="seed" class="config-input" type="number" value="42" min="0" />
        </div>
        <button type="submit" id="configure-btn">Configure &amp; Start</button>
      </form>
    </div>
  </aside>

  <div class="main-content">
    <div id="charts">
      <div id="conflict-chart"></div>
      <div id="issue-stacked-chart"></div>
    </div>

    <div id="issues-chart"></div>

    <h3 style="margin-left:0.75rem;">Conflict Intensity over Battlefields</h3>
    <div id="map"></div>
  </div>

  <!-- Socket.IO Client -->
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
